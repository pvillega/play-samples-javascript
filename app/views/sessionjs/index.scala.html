@()(implicit request: play.api.mvc.RequestHeader)

@moreScripts = {
<script src="@routes.Assets.at("javascripts/json2.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/session.min.js")" type="text/javascript"></script>
}

@main("I18N", moreScripts) {

<div class="row">
    <div class="span12">
    <p>This page shows usage of Session.js, a javascript library that provides information about the user that is viewing the page right now.</p>
    <p>The code uses the library from <a href="https://github.com/codejoust/session.js">https://github.com/codejoust/session.js</a>.</p>
    <p>To use it, you need to set the variable 'window.session' <em>before</em> the script is included. The object can be provided with some configuration options (like using HTML 5 or not, etc).</p>
    <p>Once loaded, the script will retrieve all the data it can from the user and trigger a callback function with that parameter as first element. We can parse the data in that callback.</p>
    <p>Usages include detecting how many time the user has visited the page, what browser is being used, local time of the user, language, etc.</p>
    <br/>
    <h4>Current user data:</h4>
    @* Results will be shown in this 'pre' tag *@
    <pre></pre>

    </div>
</div>

<script>
    // This will configure the session object
    // Notice it is being set right now, before the session.js file will be loaded
    window.session = {
        //we set basic options
        options: {
            use_html5_location: false,
            session_timeout: 5
        },
        start: function( data ) {
            // We parse the data and add the results to the 'pre' tag
            // We use the json2.js stringify method to convert the object to HTML for easy visualization
            document.getElementsByTagName('pre')[0].innerHTML = JSON.stringify( data, undefined, 2 );
        }
    };

    $(function(){
        // code for the navigation bar, ignore in this example
        setNavbar("Sessionjs");
    });
</script>

    
}